<html>
<head>
  <title>WebSocket Client</title>
  <!-- for now, use google's CDN. TODO: self-host -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>
  <body>
  <script type="text/javascript">
    function WebSocketTest() {
      if ("WebSocket" in window) {
        var ws = new WebSocket("ws://127.0.0.1:8001");
        ws.onopen = function() {
          ws.send("reply");
          //$('.log').append("WebSocket connected.<br>");
        };

        ws.onmessage = function (evt) {
          var msg = evt.data;
          $('.log').append(msg + "<br>");
        };

        ws.onclose = function () {
          //$('.log').append("WebSocket closed.<br>");
        }; 
      } else { 
        alert("Your browser does not support WebSockets.");
      }
    }

    WebSocketTest();
  </script>
  <div class="log"></div>
</body>
</html>
